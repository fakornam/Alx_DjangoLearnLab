<!-- tagged_posts.html -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Posts Tagged with {{ tag.name }}</title>
</head>

<body>
    <h1>Posts Tagged with "{{ tag.name }}"</h1>

    {% if posts %}
    <div class="post-list">
        {% for post in posts %}
        <div class="post-item">
            <h2><a href="{% url 'post_detail' post.id %}">{{ post.title }}</a></h2>
            <p>{{ post.content|slice:":100" }}...</p>
            <p>Tags:
                {% for tag in post.tags.all %}
                <a href="{% url 'tagged_posts' tag.name %}">{{ tag.name }}</a>{% if not forloop.last %}, {% endif %}
                {% endfor %}
            </p>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <p>No posts found with this tag.</p>
    {% endif %}
</body>

</html>